<% content_for(:pre_header) do %>
  <div class="dashboard-cover | p-l" data-controller="scroll-progress">
    <div class="dashboard-cover--content | container stack centre | palatino highlight-black c-white">
      <h1 class="size-4" data-controller="highlight"><span class="p-xs">Ex Libris Mörk Borg</span></h1>
      <div class="size-2 leading-small" data-controller="highlight">
        <p data-controller="highlight"><span class="inline-block p-xs">A directory of content, tools, and resources for the Mörk Borg RPG</span></p>
      </div>
    </div>
  </div>
<% end %>

<div class="stack | stack-3xl">
  <div class="stack | stack-m align-center">
    <h2 class="unifraktur size-5">Categories</h2>

    <dl class="switcher | plex-mono">
      <% @dashboard.categories.in_groups(2) do |category_group| %>
        <div class="stack | stack-xs">
          <% category_group.each do |category| %>
            <div>
              <dt><%= link_to category.name, category, data: { controller: "highlight" } %></dt>
              <dd><%= category.short_description %></dd>
            </div>
          <% end %>
        </div>
      <% end %>
    </dl>
  </div>

  <div class="stack | stack-m align-center">
    <h2 class="unifraktur size-5">Latest Additions</h2>

    <div class="reel" data-controller="reel">
      <% @dashboard.recently_created_entries.each do |entry| %>
        <%= link_to entry do %>
          <div class="tile" style="--cover-image: url('<%= url_for entry.cover %>');">
            <div class="tile--cover"></div>

            <div class="tile--detail | imposter">
              <div class="unifraktur highlight-white size-2">
                <span data-controller="highlight"><%= entry.name %></span>
              </div>

              <div class="plex-mono">
                <% entry.category_tags.each do |category| %>
                  <span data-controller="highlight"><%= category.name %></span>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
